<h1>Listing Notes</h1>
<% unless @notes.empty? %>
  <table>
    <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
    </thead>

    <tbody>
    <% @notes.each do |note| %>
      <tr>
        <td><%= note.title %></td>
        <td><%= link_to 'Show', note %></td>
        <td><%= link_to 'Edit', edit_note_path(note) %></td>
        <td><a href="#" id="editModalLauncher" class="reveal-link"
               data-note='<%= raw note.to_json(
                                      :include => { :albums => { :only => :id }},
                                      :except => [:user_id, :latlon]) %>'
               data-albums="<%= raw current_user.albums.to_json(:only => [:title, :id]) %>"
        >Edit (popup)</a></td>
        <td><%= link_to 'Delete', note, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
<% else %>
  Nothing yet!
  <br>
<% end %>

<br>

<%= link_to 'Create Note', new_note_path, class:'button' %>

<div id="editModal" class="reveal-modal xlarge" data-reveal aria-hidden="true">
  <div class="medium-6 columns">
    <h3>Note</h3>
  </div>

  <div class="medium-6 columns full">
    <div id="map-canvas"></div>
    <div id="overlay" class="hide">
      <a id="close-overlay" class="right">X</a>
    </div>
  </div>
  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
</div>

<%= javascript_include_tag 'https://maps.googleapis.com/maps/api/js?key=AIzaSyBTrBJkp-8i6MZKKotUoTnzoUiXV_zlIVg' %>
<%= javascript_include_tag 'geolocation' %>
<%= javascript_include_tag 'NotesViewer' %>